<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
   <link rel="stylesheet" href="/libs/highlight/github.min.css">
   
  <link rel="stylesheet" href="/css/franklin.css">
<link rel="stylesheet" href="/css/extra.css">
<link rel="stylesheet" href="/css/minimal-mistakes.css">
<link rel="stylesheet" href="/css/adjust.css">
<link rel="stylesheet" href="/css/luminous-basic.min.css">
<link rel="icon" href="/assets/favicon.ico">
<link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/earlyaccess/notosansjp.css" rel="stylesheet">
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->

<!--[if IE ]>
<style>
  /* old IE unsupported flexbox fixes */
  .greedy-nav .site-title {
    padding-right: 3em;
  }
  .greedy-nav button {
    position: absolute;
    top: 0;
    right: 0;
    height: 100%;
  }
</style>
<![endif]-->

   <title>juliaã§å‰å‡¦ç†å¤§å…¨1</title>  
  <!-- end custom head snippets -->
</head>
<body class="layout--single">
  <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/">Hanafsky.com</a>
        <ul class="visible-links">
          <li class="masthead__menu-item"><a href="/tips/" >Julia-tips</a></li>
          <li class="masthead__menu-item"><a href="/blog/" >Blog</a></li>
          <li class="masthead__menu-item"><a href="/project/" >Projects</a></li>
          <li class="masthead__menu-item"><a href="/about/">About</a></li>
        </ul>
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

  <div class="initial-content">
    <div id="main" role="main">
      <div class="sidebar sticky">
        <div itemscope itemtype="https://schema.org/Person">
          <div class="author__avatar">
            <img src="/assets/design/author3.png" alt="Dio" itemprop="image">
          </div>
          <div class="author__content">
            <h3 class="author__name" itemprop="name">Kei Hanafusa</h3>
            <p class="author__bio" itemprop="description">Chemical Engineer, <br> living in Osaka, ğŸ—¾</p>
          </div>
          <div class="author__urls-wrapper">
            <button class="btn btn--inverse">Follow</button>
            <ul class="author__urls social-icons">
              <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
                <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Osaka, Japan</span></li>
              <li><a href="https://twitter.com/hanafusakei" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
              <li><a href="https://github.com/hanafsky" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
            </ul>
          </div>

          
          
              

          <div class="author__urls-wrapper">
            <button class="btn btn--inverse">Tag</button>
            <ul class="author__urls social-icons">
              <li>ã‚¿ã‚°</li>
              <li></li>
              <li><a href="/tag/setting/">è¨­å®š</a></li>
              <li><a href="/tag/thirdparty/">ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</a></li>
              <li><a href="/tag/recipe">ãƒ¬ã‚·ãƒ”</a></li>
            </ul>
          </div>
          
        </div>
      </div>


<!-- Content appended here -->
<div class="franklin-content"><h1 id="juliaã§å‰å‡¦ç†å¤§å…¨_2æŠ½å‡º"><a href="#juliaã§å‰å‡¦ç†å¤§å…¨_2æŠ½å‡º" class="header-anchor">juliaã§å‰å‡¦ç†å¤§å…¨ 2.æŠ½å‡º </a></h1>
<p><div class="titleimage"><img src="/assets/tips/preprocess.jpg" alt="" >
<div style="text-align:right; font-size:small; color:grey">(src=https://pixabay.com/photos/food-salad-raw-carrots-1209503/)</div></div> 
<div class="sns-container top">
  <div class="sns-box b-twitter">
    <a href="https://twitter.com/share?url=https://hanafsky.com/tips/preprocess/&text=juliaã§å‰å‡¦ç†å¤§å…¨&via=HanafusaKei&related=HanafusaKei"
    target="_blank" rel="nofollow"><i class="fab fa-twitter"></i></a></div>
  <div class="sns-box b-facebook">
    <a href="http://www.facebook.com/share.php?u=https://hanafsky.com/tips/preprocess/" 
    target="_blank" rel="nofollow"><i class="fab fa-facebook"></i></a></div>
  <div class="sns-box b-hatena">
    <a href="http://b.hatena.ne.jp/add?mode=confirm&url=http://hanafsky.com/tips/preprocess/&title=juliaã§å‰å‡¦ç†å¤§å…¨"
    target="_blank" rel="nofollow"><span class="icon-hatena"></span></a></div>
  <div class="sns-box b-pocket">
    <a href="http://getpocket.com/edit?url=https://hanafsky.com/tips/preprocess/&title=juliaã§å‰å‡¦ç†å¤§å…¨"
    rel="nofollow" target="_blank"><i class="fab fa-get-pocket"></i></a></div>
  <div class="sns-box b-feedly">
    <a href="http://feedly.com/i/subscription/feed/https://hanafsky.com/feed"
    rel="nofollow" target="_blank"><span class="icon-feedly"></i></a></div>
  <div class="sns-box b-line">
    <a href='https://social-plugins.line.me/lineit/share?url=https://hanafsky.com/tips/preprocess/'
    target='blank' rel="nofollow"><span class="icon-line"></span></a></div>
</div>
</p>
<p>juliaã§å‰å‡¦ç†å¤§å…¨ã‚’ã‚„ã‚Šã¾ã™ã€‚ä»Šå›ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿ã“ã¿ã¨æŠ½å‡ºã®ã‚„ã‚Šæ–¹ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚ å†…å®¹ã¯å‰å‡¦ç†å¤§å…¨ã®ç¬¬2ç« ã«ç›¸å½“ã—ã¾ã™ã€‚</p>
<p>@chainãƒã‚¯ãƒ­ã‚’ä½¿ã£ãŸãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã«ã¤ã„ã¦ã‚‚ç°¡å˜ã«è§£èª¬ã—ã¾ã™ã€‚</p>
<div class="franklin-toc"><ol><li><a href="#ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€</a></li><li><a href="#ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†">ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†</a><ol><li><a href="#juliaæ¨™æº–ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†">juliaæ¨™æº–ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†</a></li><li><a href="#å¼•æ•°ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã®å¯¾å¿œ">å¼•æ•°ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã®å¯¾å¿œ</a></li><li><a href="#chainjl_ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸">Chain.jl ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</a></li></ol></li><li><a href="#æŠ½å‡º">æŠ½å‡º</a><ol><li><a href="#ãƒ‡ãƒ¼ã‚¿åˆ—ã®æŠ½å‡º">ãƒ‡ãƒ¼ã‚¿åˆ—ã®æŠ½å‡º</a></li><li><a href="#æ¡ä»¶æŒ‡å®šã«ã‚ˆã‚‹æŠ½å‡º">æ¡ä»¶æŒ‡å®šã«ã‚ˆã‚‹æŠ½å‡º</a></li><li><a href="#ãƒ‡ãƒ¼ã‚¿å€¤ã«åŸºã¥ã‹ãªã„ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°">ãƒ‡ãƒ¼ã‚¿å€¤ã«åŸºã¥ã‹ãªã„ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°</a></li><li><a href="#2-4_é›†ç´„idã«åŸºã¥ãã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°">2-4 é›†ç´„IDã«åŸºã¥ãã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°</a></li></ol></li></ol></div>
<h2 id="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€"><a href="#ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€" class="header-anchor">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€</a></h2>
<p>CSV ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã§ã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ã‚’ã‚ˆãä½¿ã„ã¾ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> DataFrames,CSV
df = CSV.read(<span class="hljs-string">&quot;file.csv&quot;</span>, DataFrame)</code></pre>
<div class="warning"><div class="title">ğŸ˜• Warning&#33;</div>
<div class="content">æœ€è¿‘ã€<code>CSV.read</code>é–¢æ•°ã¯ã€å‡ºåŠ›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿å‹ï¼ˆã“ã®å ´åˆã¯ DataFrame å‹ï¼‰ã‚’æŒ‡å®šã—ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã‚’åãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</div></div>
<p>CSVãƒ•ã‚¡ã‚¤ãƒ«ä»¥å¤–ã®èª­ã¿è¾¼ã¿ã§ã¯ã€Excelã‹ã‚‰èª­ã¿è¾¼ã‚€ã“ã¨ãŒå¤šã„ã®ã§ã€ ExcelFiles.jlã‚’ã‚ˆãåˆ©ç”¨ã—ã¾ã™ã€‚ã“ã¡ã‚‰ã¯ã‚·ãƒ¼ãƒˆåã‚’ç›´æ¥æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> DataFrames, ExcelFiles
df = DataFrame(load(<span class="hljs-string">&quot;file.xlsx&quot;</span>,<span class="hljs-string">&quot;Sheet1&quot;</span>))</code></pre>
<p>datãƒ•ã‚¡ã‚¤ãƒ«ãªã‚‰ã€æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®DelimitedFiles.jlã‚’åˆ©ç”¨ã™ã‚‹ã¨èª­ã¿è¾¼ã¿ãŒé«˜é€Ÿã§ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> DataFrames,DelimitedFiles

df = DataFrame(readdlm(<span class="hljs-string">&quot;file.dat&quot;</span>))</code></pre>
<p>ãã®ã»ã‹ã«ã€Rã¨pythonã§å…±é€šãªFeatherå½¢å¼ã‚’åˆ©ç”¨ã—ã¦ã„ãŸã“ã¨ã‚‚ã‚ã‚Šã¾ã—ãŸãŒã€ ã»ã‹ã®è¨€èªã§å‡¦ç†ã™ã‚‹ã“ã¨ã‚‚ãªã‹ã£ãŸã—ã€ç‰¹æ®µãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå°ã•ããªã‚‹ã‚ã‘ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
<p>ã•ã¦ã€æ—©é€Ÿã‚µãƒ³ãƒ—ãƒ«ã®ãƒ›ãƒ†ãƒ«ã®äºˆç´„ãƒ‡ãƒ¼ã‚¿ï¼ˆreserve.csvï¼‰ã‚’èª­ã¿è¾¼ã‚“ã§ã„ãã¾ã™ã€‚ ä¸€è¡Œç›®ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> DataFrames,CSV,Chain,Downloads

reserve_url = <span class="hljs-string">&quot;https://raw.githubusercontent.com/hanafsky/awesomebook/master/data/reserve.csv&quot;</span>

reserve_df = <span class="hljs-meta">@chain</span> reserve_url Downloads.download CSV.File DataFrame
println(first(reserve_df))</code></pre>
<div class="code-output"><pre><code class="plaintext hljs">DataFrameRow
 Row â”‚ reserve_id  hotel_id  customer_id  reserve_datetime     checkin_date  checkin_time  checkout_date  people_num  total_price
     â”‚ String7     String7   String7      String31             Dates.Date    Dates.Time    Dates.Date     Int64       Int64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ r1          h_75      c_1          2016-03-06 13:09:42  2016-03-26    10:00:00      2016-03-29              4        97200
</code></pre></div>
<p>ã„ããªã‚Š@chainãƒã‚¯ãƒ­ã‚’ä½¿ã£ãŸãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ãŒã§ã¦ãã¾ã™ãŒã€ã“ã‚Œã¯æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§è§£èª¬ã—ã¾ã™ã€‚</p>
<h2 id="ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†"><a href="#ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†" class="header-anchor">ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†</a></h2>
<h3 id="juliaæ¨™æº–ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†"><a href="#juliaæ¨™æº–ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†" class="header-anchor">juliaæ¨™æº–ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†</a></h3>
<p><strong>ã€Œãã‚‚ãã‚‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã¨ã¯ä½•ãã‚„?ã€</strong>ã‹ã‚‰è§£èª¬ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ ç°¡å˜ãªä¾‹ã¨ã—ã¦ã€æ¬¡ã®ã‚ˆã†ãªé–¢æ•°ãŒå…¥ã‚Œå­ã«ãªã£ãŸè¨ˆç®—ã‚’ã—ãŸã„å ´åˆã‚’è€ƒãˆã¾ã™ã€‚</p>
<pre><code class="julia hljs">sin(cos(tan(<span class="hljs-number">1</span>)))</code></pre>
<p>é–¢æ•°åãŒçŸ­ã„å ´åˆã¯è‰¯ã„ã®ã§ã™ãŒã€ã“ã®ã‚ˆã†ãªå…¥ã‚Œå­ã«ãªã£ãŸå¼ã¯ã€ä¸€èˆ¬çš„ã«å¯èª­æ€§ãŒé«˜ã„ã¨ã¯è¨€ãˆã¾ã›ã‚“ã€‚ ãã“ã§ã€ä½œç”¨ã•ã›ã‚‹é–¢æ•°ã‚’å¾Œã‹ã‚‰è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ã€juliaã§ã¯æ¬¡ã®ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­<code>|&gt;</code>ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ ãƒ•ã‚©ãƒ³ãƒˆã®é–¢ä¿‚ã§å³ä¸‰è§’ã«è¦‹ãˆã¾ã™ãŒã€å®Ÿéš›ã®å…¥åŠ›ã¯|&gt;ã§ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-number">1</span> |&gt; tan |&gt; cos |&gt; sin</code></pre>
<p>ã“ã®ã‚ˆã†ãªè¨˜æ³•ã‚’æ¡ç”¨ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆã¯ã€å¯èª­æ€§ãŒé«˜ã¾ã‚‹ã ã‘ã§ãªãã€å®Ÿè¡Œçµæœã‚’ç¢ºèªã—ãªãŒã‚‰å¾Œã§é–¢æ•°ã‚’è¿½åŠ ã§ãã‚‹ã“ã¨ã§ã™ã€‚</p>
<h3 id="å¼•æ•°ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã®å¯¾å¿œ"><a href="#å¼•æ•°ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã®å¯¾å¿œ" class="header-anchor">å¼•æ•°ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã®å¯¾å¿œ</a></h3>
<p>ã¨ã“ã‚ãŒã€è¤‡æ•°ã®å¼•æ•°ã‚’ã¨ã‚‹é–¢æ•°ã‚’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã§å®Ÿè£…ã—ãŸã„ã¨ãã¯ã€ ãã®ã¾ã¾ã§ã¯å®Ÿè¡Œã§ããªã„å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚ãã“ã§ã€ç„¡åé–¢æ•°ã‚’ä½¿ã†å¿…è¦ãŒã§ã¦ãã¾ã™ã€‚</p>
<pre><code class="julia hljs">add(a,b) = a+b
<span class="hljs-number">1</span> |&gt; (x -&gt; add(x,<span class="hljs-number">2</span>))</code></pre>
<p>ãŸã ã—ã€ã“ã®ã‚ˆã†ãªæ›¸ãæ–¹ã‚’ã™ã‚‹ã¨å¯èª­æ€§ãŒçŠ ç‰²ã«ãªã‚Šã¾ã™ã€‚</p>
<p>ã“ã®å•é¡Œã‚’è§£æ±ºã§ãã‚‹ã®ãŒãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚</p>
<h3 id="chainjl_ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸"><a href="#chainjl_ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸" class="header-anchor">Chain.jl ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</a></h3>
<p>ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ãŒã€ã“ã“ã§ã¯Chain.jlã‚’ä½¿ã†ã“ã¨ã«ã—ã¾ã™ã€‚ ä½¿ã„æ–¹ã‚’ç°¡å˜ã«è§£èª¬ã—ã¾ã™ã€‚ 
<a href="https://github.com/jkrumbiegel/Chain.jl"><img src="https://github-link-card.s3.ap-northeast-1.amazonaws.com/jkrumbiegel/Chain.jl.png" width="460px"></a>
</p>
<p>@chainãƒã‚¯ãƒ­ã‚’ä½¿ã†ã¨ã€ãã‚‚ãã‚‚ãƒ‘ã‚¤ãƒ—æ¼”ç®—å­<code>|&gt;</code>ã‚’è¨˜è¿°ã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚ æœ€åˆã®ä¾‹ã¯ã€æ¬¡ã®ã‚ˆã†ã«ä¸€è¡Œã§æ›¸ã‘ã¾ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Chain
<span class="hljs-meta">@chain</span> <span class="hljs-number">1</span> tan cos sin</code></pre>
<p>2ç•ªç›®ã®ä¾‹ã®ã‚ˆã†ã«ã€è¤‡æ•°ã®å¼•æ•°ã‚’ã¨ã‚‹é–¢æ•°ãŒãã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚</p>
<pre><code class="julia hljs">add(a,b) = a+b
<span class="hljs-meta">@chain</span> <span class="hljs-number">1</span> add(<span class="hljs-number">2</span>) add(<span class="hljs-number">3</span>)</code></pre><pre><code class="plaintext hljs">6</code></pre>
<p>å·¦å´ã®è¨ˆç®—çµæœã‚’ã€æ¬¡ã®é–¢æ•°ã®æœ€åˆã«å¼•æ•°ã¨ã—ã¦æ‰±ã£ã¦ãã‚Œã‚‹ã‹ã‚‰ã§ã™ã€‚ ã“ã®@chainãƒã‚¯ãƒ­ãŒä½•ã‚’ã—ã¦ã„ã‚‹ã‹å±•é–‹ã—ã¦ç¢ºèªã—ã¦ã¿ã‚‹ã¨</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Chain
<span class="hljs-meta">@macroexpand</span> <span class="hljs-meta">@chain</span> <span class="hljs-number">1</span> add(<span class="hljs-number">2</span>) add(<span class="hljs-number">3</span>) add(<span class="hljs-number">4</span>)</code></pre><pre><code class="plaintext hljs">quote
    local var&quot;##444&quot; = 1
    local var&quot;##445&quot; = add(var&quot;##444&quot;, 2)
    local var&quot;##446&quot; = add(var&quot;##445&quot;, 3)
    local var&quot;##447&quot; = add(var&quot;##446&quot;, 4)
    var&quot;##447&quot;
end</code></pre>
<h4 id="è¤‡æ•°è¡Œã§å®Ÿè¡Œ"><a href="#è¤‡æ•°è¡Œã§å®Ÿè¡Œ" class="header-anchor">è¤‡æ•°è¡Œã§å®Ÿè¡Œ</a></h4>
<p>è¤‡æ•°è¡Œã§å®Ÿè¡Œã—ãŸã„å ´åˆã¯ã€<code>begin-end</code>ç’°å¢ƒã§å›²ã„ã¾ã™ã€‚ æœ€åˆã®ä¾‹ã§ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-meta">@chain</span> <span class="hljs-number">1</span> <span class="hljs-keyword">begin</span>
  tan
  cos
  sin
<span class="hljs-keyword">end</span></code></pre><pre><code class="plaintext hljs">0.013387802193205699</code></pre>
<h4 id="å¼•æ•°ã®ä½ç½®ã‚’æ˜ç¤º"><a href="#å¼•æ•°ã®ä½ç½®ã‚’æ˜ç¤º" class="header-anchor">å¼•æ•°ã®ä½ç½®ã‚’æ˜ç¤º</a></h4>
<p>å¼•æ•°ã®ä½ç½®ã‚’æ˜ç¤ºã—ãŸã„å ´åˆã¯ã€<code>_</code>ï¼ˆã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ï¼‰ã‚’ç”¨ã„ã¾ã™ã€‚ ã“ã‚Œã¯ã€ã»ã‹ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚‚åŒã˜å®Ÿè£…ã§ã‚ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚</p>
<p>ãƒã‚¯ãƒ­ã‚’å±•é–‹ã™ã‚‹ã¨<code>_</code>ã®ä½ç½®ãŒlocalå¤‰æ•°ã§æ›¸ãæ›ãˆã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-meta">@macroexpand</span>(<span class="hljs-meta">@chain</span> reserve_url <span class="hljs-keyword">begin</span>
  Downloads.download(<span class="hljs-built_in">IOBuffer</span>())
  <span class="hljs-built_in">String</span>(take!(_))
  CSV.read(<span class="hljs-built_in">IOBuffer</span>(_),DataFrame)
<span class="hljs-keyword">end</span>) |&gt;Base.remove_linenums!</code></pre><pre><code class="plaintext hljs">quote
    local var&quot;##452&quot; = reserve_url
    local var&quot;##453&quot; = Downloads.download(var&quot;##452&quot;, IOBuffer())
    local var&quot;##454&quot; = String(take!(var&quot;##453&quot;))
    local var&quot;##455&quot; = CSV.read(IOBuffer(var&quot;##454&quot;), DataFrame)
    var&quot;##455&quot;
end</code></pre>
<h4 id="asideãƒã‚¯ãƒ­"><a href="#asideãƒã‚¯ãƒ­" class="header-anchor">@asideãƒã‚¯ãƒ­</a></h4>
<p>ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã®é€”ä¸­ã®çµæœã§ä½•ã‹ã‚’ã—ãŸã„ã¨ãã«ã¯ã€@asideãƒã‚¯ãƒ­ãŒä½¿ãˆã¾ã™ã€‚ ãã®ã†ã¡ä½¿ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-meta">@chain</span> <span class="hljs-number">1</span> <span class="hljs-keyword">begin</span>
  tan
  <span class="hljs-meta">@aside</span> println(_)
  cos
  sin
<span class="hljs-keyword">end</span></code></pre><pre><code class="plaintext hljs">1.5574077246549023
0.013387802193205699</code></pre>
<p>@chainãƒã‚¯ãƒ­ã¨DataFrames.jlã¯éå¸¸ã«ç›¸æ€§ãŒè‰¯ã„ã®ã§ã€ã“ã®å…ˆã‚¬ãƒ³ã‚¬ãƒ³ä½¿ã£ã¦ã„ãã¾ã™ã€‚</p>
<h2 id="æŠ½å‡º"><a href="#æŠ½å‡º" class="header-anchor">æŠ½å‡º</a></h2>
<h3 id="ãƒ‡ãƒ¼ã‚¿åˆ—ã®æŠ½å‡º"><a href="#ãƒ‡ãƒ¼ã‚¿åˆ—ã®æŠ½å‡º" class="header-anchor">ãƒ‡ãƒ¼ã‚¿åˆ—ã®æŠ½å‡º</a></h3>
<p>å‰å‡¦ç†å¤§å…¨ã§ã¯ã€å¯èª­æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ã€ãƒ‡ãƒ¼ã‚¿ã®åˆ—ç•ªå·ã§ã¯ãªãã€ãƒ©ãƒ™ãƒ«ã«ã‚ˆã£ã¦åˆ—ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ ã¾ãšã€ãƒ©ãƒ™ãƒ«åã‚’ç¢ºèªã—ã¦ãŠãã¾ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-meta">@show</span> names(reserve_df);</code></pre>
<div class="code-output"><pre><code class="plaintext hljs">names(reserve_df) = [&quot;reserve_id&quot;, &quot;hotel_id&quot;, &quot;customer_id&quot;, &quot;reserve_datetime&quot;, &quot;checkin_date&quot;, &quot;checkin_time&quot;, &quot;checkout_date&quot;, &quot;people_num&quot;, &quot;total_price&quot;]
</code></pre></div>
<p>è©¦ã—ã«<code>reserve_id</code>ã¨<code>hotel_id</code>ã®åˆ—ã‚’æŠ½å‡ºã—ã¦ã¿ã¾ã™ã€‚</p>
<h4 id="string_ã§æŒ‡å®š"><a href="#string_ã§æŒ‡å®š" class="header-anchor">String ã§æŒ‡å®š</a></h4>
<p>ã‚ªãƒ¼ã‚½ãƒ‰ãƒƒã‚¯ã‚¹ãªã®ã¯ã€ãƒ©ãƒ™ãƒ«åã‚’Stringå‹ã§æŒ‡å®šã™ã‚‹å ´åˆã§ã™ã€‚</p>
<pre><code class="julia hljs">reserve_df[!,[<span class="hljs-string">&quot;reserve_id&quot;</span>,<span class="hljs-string">&quot;hotel_id&quot;</span>]] |&gt; first |&gt; println</code></pre>
<div class="code-output"><pre><code class="plaintext hljs">DataFrameRow
 Row â”‚ reserve_id  hotel_id
     â”‚ String7     String7
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ r1          h_75
</code></pre></div>
<h4 id="symbol_ã§æŒ‡å®š"><a href="#symbol_ã§æŒ‡å®š" class="header-anchor">Symbol ã§æŒ‡å®š</a></h4>
<p>åŒã˜ã“ã¨ã‚’ Symbolå‹ã§æŒ‡å®šã—ã¦ã‚„ã£ã¦ã¿ã¾ã™ã€‚</p>
<pre><code class="julia hljs">reserve_df[!,[:reserve_id,<span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&quot;hotel_id&quot;</span>)]] |&gt; first |&gt; println
println()
<span class="hljs-meta">@show</span> typeof(:reserve_id)</code></pre>
<p><div class="code-output"><pre><code class="plaintext hljs">DataFrameRow
 Row â”‚ reserve_id  hotel_id
     â”‚ String7     String7
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ r1          h_75

typeof(:reserve_id) = Symbol
</code></pre></div> ã“ã“ã§ã€<code>:reserve_id</code>ã¨<code>Symbol&#40;&quot;reserve_id&quot;&#41;</code>ã¯åŒã˜çµæœã‚’ç¤ºã—ã¾ã™ã€‚ ã¨ã‚‚ã«å‹ã¯Symbolå‹ã§ã™ã€‚</p>
<p><code>:reserve_id</code>ã®æ–¹ãŒã€ã‚¿ã‚¤ãƒ—æ•°ãŒå°‘ãªã„ã®ã§çœã‚¨ãƒã§ã™ã€‚</p>
<p>ã¾ãŸã€ä¸€åˆ—ã ã‘æŠ½å‡ºã—ãŸã„ã¨ãã¯ã€<code>df.reserve_id</code>ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ ãŸã ã—ã€è¿”ã‚Šå€¤ã®å‹ã¯DataFrameå‹ã§ã¯ãªãã€Vecterå‹ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-meta">@show</span> reserve_df.reserve_id[<span class="hljs-number">1</span>:<span class="hljs-number">5</span>]
println()
<span class="hljs-meta">@show</span> typeof(reserve_df.reserve_id)</code></pre>
<div class="code-output"><pre><code class="plaintext hljs">reserve_df.reserve_id[1:5] = InlineStrings.String7[&quot;r1&quot;, &quot;r2&quot;, &quot;r3&quot;, &quot;r4&quot;, &quot;r5&quot;]

typeof(reserve_df.reserve_id) = Vector{InlineStrings.String7}
</code></pre></div>
<div class="warning"><div class="title">ğŸ˜• Warning&#33;</div>
<div class="content"><p>ã„ã¤ã§ã‚‚<code>:reserve_id</code>ã®ã‚ˆã†ã«ã§ãã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚ˆãã‚ã‚‹ãƒˆãƒ©ãƒƒãƒ—ãŒã€ ãƒ©ãƒ™ãƒ«åã«<code>&#37;</code>ã‚„<code>/</code>ãªã©ã®2é …æ¼”ç®—å­ãŒæ–‡å­—åˆ—ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹æ™‚ã§ã™ã€‚</p>
<pre><code class="julia hljs">testdf = DataFrame(<span class="hljs-string">&quot;a%&quot;</span>=&gt;<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b(m/s)&quot;</span>=&gt;<span class="hljs-number">1</span>:<span class="hljs-number">1e5</span>)
println(first(testdf))</code></pre>
<div class="code-output"><pre><code class="plaintext hljs">DataFrameRow
 Row â”‚ a%      b(m/s)
     â”‚ String  Float64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ a           1.0
</code></pre></div>
<p>ã“ã®å ´åˆã«ã¯ã€<code>df&#91;&#33;,Symbol&#40;&quot;a&#37;&quot;&#41;&#93;</code>ã®ã‚ˆã†ã«ã—ã¦æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ æ¼”ç®—å­ãŒãƒ©ãƒ™ãƒ«åã«ä½¿ã‚ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ç§ã¯æœ€åˆã«ãƒ©ãƒ™ãƒ«åã‚’å½“ãŸã‚Šéšœã‚Šã®ãªã„ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p></div></div>
<div class="note"><div class="title">ğŸ˜² Note</div>
<div class="content"><p><code>reserve_df&#91;:,&#91;&quot;reserve_id&quot;&#93;&#93;</code>ã§ã‚‚<code>reserve_df&#91;&#33;,&#91;&quot;reserve_id&quot;&#93;&#93;</code> ã§ã‚‚ã€è¿”ã‚Šå€¤ã¯åŒã˜ã§ã™ã€‚ ãŸã ã—ã€å‰è€…ã®å ´åˆã¯æ–°ã—ããƒ¡ãƒ¢ãƒªå‰²ã‚Šå½“ã¦ãŒç™ºç”Ÿã—ã¾ã™ã€‚ãã®çµæœã¨ã—ã¦å®Ÿè¡Œé€Ÿåº¦ã‚‚é…ããªã‚Šã¾ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-meta">@time</span> testdf[:,[<span class="hljs-string">&quot;a%&quot;</span>,<span class="hljs-string">&quot;b(m/s)&quot;</span>]]
println()
<span class="hljs-meta">@time</span> testdf[!,[<span class="hljs-string">&quot;a%&quot;</span>,<span class="hljs-string">&quot;b(m/s)&quot;</span>]]</code></pre>
<div class="code-output"><pre><code class="plaintext hljs">  0.006153 seconds (4.72 k allocations: 1.858 MiB, 93.06% compilation time)

  0.000017 seconds (18 allocations: 1.391 KiB)
</code></pre></div></div></div>
<h4 id="select_é–¢æ•°"><a href="#select_é–¢æ•°" class="header-anchor">select é–¢æ•°</a></h4>
<p>åˆ—ã‚’æŠ½å‡ºã™ã‚‹ã«ã¯ã€select é–¢æ•°ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚</p>
<pre><code class="julia hljs">select(reserve_df,:reserve_id, :hotel_id) |&gt; first |&gt; println</code></pre>
<div class="code-output"><pre><code class="plaintext hljs">DataFrameRow
 Row â”‚ reserve_id  hotel_id
     â”‚ String7     String7
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ r1          h_75
</code></pre></div>
<p>selecté–¢æ•°ã«ã¯ã€æ–°ã—ã„åˆ—ã‚’ä½œã‚‹æ©Ÿèƒ½ã‚‚ã‚ã‚‹ã®ã§ã€ å¾Œã§æ´»èºã—ãã†ã§ã™ã€‚</p>
<h4 id="not_ã‚„æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹æŠ½å‡º"><a href="#not_ã‚„æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹æŠ½å‡º" class="header-anchor">Not ã‚„æ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹æŠ½å‡º</a></h4>
<p>ãƒ©ãƒ™ãƒ«ãŒ<code>id</code>ã§çµ‚ã‚ã‚‹åˆ—ã‚’æ­£è¦è¡¨ç¾ã§æŠ½å‡ºã—ã¾ã™ã€‚</p>
<pre><code class="julia hljs">reserve_df[!,<span class="hljs-string">r&quot;id$&quot;</span>] |&gt; first |&gt; println</code></pre>
<p><div class="code-output"><pre><code class="plaintext hljs">DataFrameRow
 Row â”‚ reserve_id  hotel_id  customer_id
     â”‚ String7     String7   String7
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ r1          h_75      c_1
</code></pre></div> <div class="warning"><div class="title">ğŸ˜• Warning&#33;</div>
<div class="content">å‰å‡¦ç†å¤§å…¨ã§ã¯ã€ãšã£ã¨ä½¿ã†ã‚³ãƒ¼ãƒ‰ã«ã“ã®ã‚ˆã†ãªæŠ½å‡ºæ–¹æ³•ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã¯é¿ã‘ã‚‹ã¹ãã ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</div></div></p>
<p>ãƒ©ãƒ™ãƒ«åãŒ<code>id</code>ã§çµ‚ã‚ã‚‰ãªã„åˆ—ã‚’æŠ½å‡ºã™ã‚‹ã«ã¯ã€Not ã«å…¥ã‚Œã¦ã—ã¾ã†ã¨æ¥½ã§ã™ã€‚ Not ã®ä¸­èº«ã¯ã€ç›´æ¥ãƒ©ãƒ™ãƒ«åã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã®ã§æœ‰ç”¨ã§ã™ã€‚</p>
<pre><code class="julia hljs">reserve_df[!,Not(<span class="hljs-string">r&quot;id$&quot;</span>)] |&gt; first |&gt; println</code></pre>
<div class="code-output"><pre><code class="plaintext hljs">DataFrameRow
 Row â”‚ reserve_datetime     checkin_date  checkin_time  checkout_date  people_num  total_price
     â”‚ String31             Dates.Date    Dates.Time    Dates.Date     Int64       Int64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ 2016-03-06 13:09:42  2016-03-26    10:00:00      2016-03-29              4        97200
</code></pre></div>
<h3 id="æ¡ä»¶æŒ‡å®šã«ã‚ˆã‚‹æŠ½å‡º"><a href="#æ¡ä»¶æŒ‡å®šã«ã‚ˆã‚‹æŠ½å‡º" class="header-anchor">æ¡ä»¶æŒ‡å®šã«ã‚ˆã‚‹æŠ½å‡º</a></h3>
<p><code>checkin_date</code>ãŒ2016-10-12ã‹ã‚‰2016-10-13ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã—ã¾ã™ã€‚ ã“ã“ã§ã¯filteré–¢æ•°ã‚’ä½¿ã„ã¾ã™ã€‚ filteré–¢æ•°ã«ã¯ã€è¦‹ã¦ã®é€šã‚Š2é€šã‚Šã®ä½¿ã„æ–¹ãŒã‚ã‚Šã¾ã™ã€‚ åŸºæœ¬çš„ã«ã¯ç„¡åé–¢æ•°ã‚’ä½¿ã£ã¦ã€<code>å¼•æ•°x-&gt; a&lt;x&lt;b</code>ã®ã‚ˆã†ãªæ›¸ãæ–¹ã‚’ã—ã¦ã„ã¾ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Dates: Date
<span class="hljs-comment"># filter(:checkin_date =&gt; row-&gt; Date(2016,10,12) &lt;= row &lt;= Date(2016,10,13), reserve_df) |&gt; println</span>
filter(row-&gt; Date(<span class="hljs-number">2016</span>,<span class="hljs-number">10</span>,<span class="hljs-number">12</span>) &lt;= row.checkin_date &lt;= Date(<span class="hljs-number">2016</span>,<span class="hljs-number">10</span>,<span class="hljs-number">13</span>), reserve_df) |&gt; println</code></pre>
<div class="code-output"><pre><code class="plaintext hljs">8Ã—9 DataFrame
 Row â”‚ reserve_id  hotel_id  customer_id  reserve_datetime     checkin_date  checkin_time  checkout_date  people_num  total_price
     â”‚ String7     String7   String7      String31             Dates.Date    Dates.Time    Dates.Date     Int64       Int64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ r285        h_121     c_67         2016-09-27 06:13:19  2016-10-12    12:00:00      2016-10-14              4       184000
   2 â”‚ r1933       h_113     c_477        2016-09-24 09:04:26  2016-10-12    11:30:00      2016-10-13              4        77200
   3 â”‚ r2291       h_230     c_574        2016-10-09 04:34:14  2016-10-12    12:00:00      2016-10-13              1        17400
   4 â”‚ r2524       h_203     c_631        2016-09-14 10:45:15  2016-10-12    10:30:00      2016-10-14              3       167400
   5 â”‚ r3147       h_163     c_794        2016-10-02 07:35:16  2016-10-13    09:00:00      2016-10-16              1        64200
   6 â”‚ r3328       h_23      c_833        2016-09-28 08:22:57  2016-10-13    09:00:00      2016-10-14              4       260400
   7 â”‚ r3381       h_110     c_844        2016-09-17 17:44:02  2016-10-13    12:30:00      2016-10-15              1        52800
   8 â”‚ r3444       h_14      c_859        2016-10-03 17:26:00  2016-10-13    12:30:00      2016-10-15              3        46200
</code></pre></div>
<p>ä¸Šã®ä¾‹ã§ã¯1è¡Œã§æ›¸ãã¾ã—ãŸãŒã€ã„ãã¤ã‹ã®å‰å‡¦ç†ã‚’ä¸€æ°—ã«è¡Œã†ãªã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¤‡æ•°è¡Œã«åˆ†ã‘ãŸã»ã†ãŒã€å¯èª­æ€§ã¯é«˜ã„ã§ã—ã‚‡ã†ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Chain
<span class="hljs-meta">@chain</span> reserve_df <span class="hljs-keyword">begin</span>
  filter(:checkin_date =&gt; &gt;=(Date(<span class="hljs-number">2016</span>,<span class="hljs-number">10</span>,<span class="hljs-number">12</span>)),_)
  filter(:checkin_date =&gt; &lt;=(Date(<span class="hljs-number">2016</span>,<span class="hljs-number">10</span>,<span class="hljs-number">13</span>)),_)
  <span class="hljs-comment"># println</span>
<span class="hljs-keyword">end</span></code></pre>
<div class="code-output"></div>
<h3 id="ãƒ‡ãƒ¼ã‚¿å€¤ã«åŸºã¥ã‹ãªã„ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°"><a href="#ãƒ‡ãƒ¼ã‚¿å€¤ã«åŸºã¥ã‹ãªã„ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°" class="header-anchor">ãƒ‡ãƒ¼ã‚¿å€¤ã«åŸºã¥ã‹ãªã„ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°</a></h3>
<p>ãƒ‡ãƒ¼ã‚¿æ•°ã‚’å¤§ä½“åŠåˆ†ã«ã—ãŸã„ã¨ãã®å‡¦æ–¹ç®‹ã§ã™ã€‚ pythonã‚„Rã®ã‚ˆã†ã«DataFrameç”¨ã«sampleé–¢æ•°ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã£ã¦ã‚‚ã‚ˆã•ãã†ã§ã™ãŒã€ ãªã„ã¿ãŸã„ãªã®ã§ã€StatsBase.jlã®sampleé–¢æ•°ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚ DataFrameã®è¡Œæ•°ã‹ã‚‰é‡è¤‡ã‚’è¨±ã•ãšã«ã€åŠåˆ†ã®å€¤ã‚’ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚ ãã—ã¦ã€ãã‚Œã‚’è¡Œç•ªå·ã¨ã—ã¦æŒ‡å®šã—ã¾ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> StatsBase: sample 
sample_row = sample(<span class="hljs-number">1</span>:nrow(reserve_df), round(<span class="hljs-built_in">Int</span>,nrow(reserve_df)/<span class="hljs-number">2</span>), replace=<span class="hljs-literal">false</span>)
reserve_df[sample_row,:]</code></pre>
<div class="code-output"></div>
<p>SQLã§å‡ºã¦ããŸã€ä¹±æ•°ã‚’ä½¿ã£ã¦ã€ãƒ‡ãƒ¼ã‚¿æ•°ã‚’ç´„åŠåˆ†ã«ã™ã‚‹æ–¹æ³•ã‚‚ä½¿ãˆãã†ã§ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Chain
reserve_df.rand=rand(nrow(reserve_df))
sdf = <span class="hljs-meta">@chain</span> reserve_df <span class="hljs-keyword">begin</span>
  filter(:rand =&gt;&lt;(<span class="hljs-number">0.5</span>),_)
  select!(Not(:rand))
<span class="hljs-keyword">end</span>
println(first(sdf))</code></pre>
<div class="code-output"><pre><code class="plaintext hljs">DataFrameRow
 Row â”‚ reserve_id  hotel_id  customer_id  reserve_datetime     checkin_date  checkin_time  checkout_date  people_num  total_price
     â”‚ String7     String7   String7      String31             Dates.Date    Dates.Time    Dates.Date     Int64       Int64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ r4          h_214     c_1          2017-03-08 03:20:10  2017-03-29    11:00:00      2017-03-30              4       194400
</code></pre></div>
<h3 id="2-4_é›†ç´„idã«åŸºã¥ãã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°"><a href="#2-4_é›†ç´„idã«åŸºã¥ãã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°" class="header-anchor">2-4 é›†ç´„IDã«åŸºã¥ãã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°</a></h3>
<p>é¡§å®¢IDã‚’é›†ç´„ã—ã¦ã€åŠåˆ†ã«ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ã€é¡§å®¢IDã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºã‚’è¡Œã„ã¾ã™ã€‚ IDã®é‡è¤‡ã‚’ãªãã™ã«ã¯uniqueé–¢æ•°ãŒä¾¿åˆ©ã§ã™ã€‚</p>
<pre><code class="julia hljs"><span class="hljs-meta">@chain</span> reserve_df.customer_id <span class="hljs-keyword">begin</span>
  unique
  sample(_, round(<span class="hljs-built_in">Int</span>,length(_)/<span class="hljs-number">2</span>),replace=<span class="hljs-literal">false</span>)
  filter(:customer_id =&gt; <span class="hljs-keyword">in</span>(_),reserve_df) 
<span class="hljs-keyword">end</span></code></pre>
<div class="code-output"></div>
<p>uniqueé–¢æ•°ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å…¨ä½“ã«é©ç”¨ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚</p>
<pre><code class="julia hljs">DataFrame(a=[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],b=[<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>]) |&gt; unique</code></pre><pre><code class="plaintext hljs">2Ã—2 DataFrame
 Row â”‚ a      b
     â”‚ Int64  String
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚     1  a
   2 â”‚     2  b</code></pre>
<p> <p style="text-align:right">  ã¤ã¥ã </p> 
<div class="sns-container top">
  <div class="sns-box b-twitter">
    <a href="https://twitter.com/share?url=https://hanafsky.com/tips/preprocess/&text=juliaã§å‰å‡¦ç†å¤§å…¨&via=HanafusaKei&related=HanafusaKei"
    target="_blank" rel="nofollow"><i class="fab fa-twitter"></i></a></div>
  <div class="sns-box b-facebook">
    <a href="http://www.facebook.com/share.php?u=https://hanafsky.com/tips/preprocess/" 
    target="_blank" rel="nofollow"><i class="fab fa-facebook"></i></a></div>
  <div class="sns-box b-hatena">
    <a href="http://b.hatena.ne.jp/add?mode=confirm&url=http://hanafsky.com/tips/preprocess/&title=juliaã§å‰å‡¦ç†å¤§å…¨"
    target="_blank" rel="nofollow"><span class="icon-hatena"></span></a></div>
  <div class="sns-box b-pocket">
    <a href="http://getpocket.com/edit?url=https://hanafsky.com/tips/preprocess/&title=juliaã§å‰å‡¦ç†å¤§å…¨"
    rel="nofollow" target="_blank"><i class="fab fa-get-pocket"></i></a></div>
  <div class="sns-box b-feedly">
    <a href="http://feedly.com/i/subscription/feed/https://hanafsky.com/feed"
    rel="nofollow" target="_blank"><span class="icon-feedly"></i></a></div>
  <div class="sns-box b-line">
    <a href='https://social-plugins.line.me/lineit/share?url=https://hanafsky.com/tips/preprocess/'
    target='blank' rel="nofollow"><span class="icon-line"></span></a></div>
</div>
 
  <div class="prev-next-link">
  <a class="prev-link" href="/tips/preprocess">
    <p class="prev-next-label">å‰ã®è¨˜äº‹</p>
    <p>
       juliaã§å‰å‡¦ç†å¤§å…¨
    </p>
  </a>
  <a class="next-link" href="/tips/preprocess/aggregation">
    <p class="prev-next-label">æ¬¡ã®è¨˜äº‹</p>
    <p>
       juliaã§å‰å‡¦ç†å¤§å…¨ é›†ç´„
    </p>
  </a>
</div>
  <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button> </p>
    <script src="https://utteranc.es/client.js"
        repo="hanafsky/blog_comments"
        issue-term="pathname"
        label="Comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
    </script>

<div class="page-foot">
  <div class="copyright">
    &copy; Kei Hanafusa. Last modified: February 08, 2024. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div><!-- CONTENT ENDS HERE -->

      </div> <!-- closure of main -->
    </div>   <!-- closure of class initial--content -->

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
        <!-- end custom footer snippets -->
        <div class="page__footer-follow">
          <ul class="social-icons">
            <li><strong>Follow:</strong></li>
            <li><a href="https://twitter.com/hanafusakei" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
            <li><a href="https://github.com/hanafsky" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          </ul>
        </div>
        <div class="page__footer-copyright">&copy; Kei Hanafusa. Powered by <a href="https://github.com/tlienart/Franklin.jl">Franklin</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="/libs/minimal-mistakes/main.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>
    <script src="/libs/myBtn/myBtn.js"></script>
    <script src="/libs/luminous/Luminous.min.js"></script>
    <script src="/libs/clipboard.min.js"></script>

    
    
        


        <!-- http://tutsplus.github.io/clipboard/ -->

<script>
	(function(){
	
		// Get the elements.
		// - the 'pre' element.
		// - the 'div' with the 'paste-content' id.
	
		var pre = document.getElementsByTagName('pre');
	
		// Add a copy button in the 'pre' element.
		// which only has the className of 'language-'.
	
		for (var i = 0; i < pre.length; i++) {
			var isLanguage = pre[i].children[0].className.indexOf('language-');
	
			if ( isLanguage === 0 ) {
				var button           = document.createElement('button');
						button.className = 'copy-button';
						button.textContent = 'Copy';
	
						pre[i].appendChild(button);
			}
		};
	
		// Run Clipboard
	
		var copyCode = new ClipboardJS('.copy-button', {
			target: function(trigger) {
				return trigger.previousElementSibling;
		}
		});
	
		// On success:
		// - Change the "Copy" text to "Copied".
		// - Swap it to "Copy" in 2s.
		// - Lead user to the "contenteditable" area with Velocity scroll.
	
		copyCode.on('success', function(event) {
			event.clearSelection();
			event.trigger.textContent = 'Copied';
			window.setTimeout(function() {
				event.trigger.textContent = 'Copy';
			}, 2000);
	
		});
	
		// On error (Safari):
		// - Change the  "Press Ctrl+C to copy"
		// - Swap it to "Copy" in 2s.
	
		copyCode.on('error', function(event) {
			event.trigger.textContent = 'Press "Ctrl + C" to copy';
			window.setTimeout(function() {
				event.trigger.textContent = 'Copy';
			}, 5000);
		});
	
	})();
	</script>
        <!-- {{ insert foot_copy.html }} -->
    
    
        <script src="/libs/mermaid/mermaid.min.js"></script>
<script>
  var config
  mermaid.initialize({
    theme: 'neutral',
    themeCSS: '\
               .mermaid-main-font {font-family:"Noto Sans JP"};\
               .section0, .section2{fill:#fadbda;opacity:0.3;};\
               .task0, .task1, .task2, .task3 {fill:#fadbda; stroke:#f6bdc0; stroke-width:1};\
               .grid {stroke:#666;stroke-width:0.5};\
               .node rect,\
               .node circle,\
               .node ellipse,\
               .node path,\
               .node polygon\
               {fill:rgba(253,237,228,0.5);\
                stroke: rgb(246,189,192)};\
               .arrowheadPath {fill:rgb(246,189,192);}\
               .edgePath .path {stroke:rgb(246,189,192);};\
               .cluster rect\
               {fill:rgba(255,249,177,0.3);\
                stroke:rgb(246,189,192)};\
               ',
    // themeCSS: '.node rect {fill:rgba(253,237,228,0.5); stroke: rgb(250,219,218)};',
    // logLevel: 3,
    // securityLevel: 'loose',
    // flowchart: { curve: 'basis' }
  });
</script>
    
    <script>
    new LuminousGallery(document.querySelectorAll('.zoom'));
</script>
    <script>
function myToc() {
    var x = document.getElementsByClassName("mytoc");
    if (x.style.display === "none") {
      x.style.display = "block";
    } else {
      x.style.display = "none";
    }
  } 
</script>
  </body>
</html>
